<!-- Breadcrumb -->
<!-- <div class="breadcrumb-bar">
    <div class="container">
        <div class="row">
            <div class="col-md-12 col-12">
                <div class="breadcrumb-list">
                    <nav aria-label="breadcrumb" class="page-breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a [routerLink]="routes.home">Home</a></li>
                            <li class="breadcrumb-item" aria-current="page">Pages</li>
                            <li class="breadcrumb-item" aria-current="page">Offre</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div> -->
<!-- /Breadcrumb -->

<!-- Cart -->
<section class="course-content cart-widget">
    <div class="container">
        <div class="student-widget">
            <div class="settings-menu p-0">
                <div class="row">
                    <div class="col-lg-12">
                      <div class="profile-heading">
                        <div class="cart-head ">
                            <h3>Liste des offres</h3>
                        </div></div>
                        <div class="cart-group">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 d-flex" *ngFor="let data of missionn">
                                    <div class="course-box course-design list-course d-flex mb-0">
                                        <div class="product">
                                            <div class="product-img">
                                                <a [routerLink]="routes.page_course_details">
                                                    <img class="rating-img" alt="" src="assets/img/iteam.jpeg">
                                                </a>
                                                <div class="price" [ngClass]="{'combo': data.title === 'FREE'}"></div>
                                            </div>
                                            <div class="product-content">
                                                <div class="course-info d-flex align-items-center border-bottom-0 pb-0">
                                                    <div class="rating-img d-flex align-items-center">
                                                        <h6>Statut : </h6>
                                                        <h6> {{data.statut}}</h6>
                                                    </div>
                                                </div>
                                                <div class="course-info d-flex align-items-center border-bottom-0 pb-0">
                                                    <div class="rating-img d-flex align-items-center">
                                                        <h6>From : </h6>
                                                        <h6> {{data.dateDebut | date}}</h6>
                                                    </div>
                                                    <div class="course-view d-flex align-items-center">
                                                        <h6>To : </h6>
                                                        <h6> {{data.dateFin | date}}</h6>
                                                    </div>
                                                </div>
                                                <div class="course-info d-flex align-items-center border-bottom-0 pb-0">
                                                    <div class="rating-img d-flex align-items-center">
                                                        <h6>Type de contrat :</h6>
                                                        <h6>{{data.typeContrat}}</h6>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="cart-remove d-flex justify-content-between align-items-center" style="gap:5px;" >
                                                <button
                                                class="btn btn-outline-primary btn-lg"
                                                style="border-color: #ff875a; color: #ff875a; margin: 1em;"

                                                data-bs-toggle="modal"
                                                data-bs-target="#addempModal"
                                                (click)="Postuleoffre(data.id)"
                                                >
                                                <i class="bi bi-send"></i>
                                                Postuler
                                             </button>
                                                <a href="javascript:;"
                                                class="btn btn-outline-primary btn-lg"
                                                style="border-color: #ff875a; color: #ff875a;"

                                                   (click)="getMissionById(data.id)"
                                                   data-bs-toggle="modal"
                                                   data-bs-target="#detailOffreModal">
                                                    <i class="bi bi-info-circle"></i> Détails                                              </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Modal pour télécharger le CV -->
                        <div class="modal fade" id="addempModal" tabindex="-1" role="dialog" aria-labelledby="addTeacherModalName" aria-hidden="true">
                          <div class="modal-dialog" role="document">
                              <div class="modal-content">
                                  <div class="modal-header">
                                      <h5 class="modal-title" id="addTeacherModalName">Télécharger CV</h5>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                  </div>
                                  <div class="modal-body">
                                      <form>
                                          <!-- Section pour le téléchargement du CV -->
                                          <div class="form-group text-center mb-4">
                                              <label class="add-course-label mb-3">Téléchargez votre CV</label>
                                              <div class="d-flex justify-content-center">
                                                  <button (click)="fileInput.click()" class="btn" style="background-color: transparent; border: none;">
                                                      <img (error)="changeSource($event)" [src]="imgUrl" class="rounded-circle" width="100px" height="100px" alt="Votre CV" />
                                                      <input hidden type="file" #fileInput (change)="onFileInput(fileInput.files)" [(ngModel)]="editproRequest.cv" name="cv">
                                                  </button>
                                              </div>
                                          </div>

                                          <!-- Message de succès ou d'erreur -->
                                          <div class="text-center">
                                              <p *ngIf="msgSuccess" class="text-success">{{msgSuccess}}</p>
                                              <p *ngIf="errorMessage" class="text-danger">{{errorMessage}}</p>
                                          </div>

                                          <!-- Bouton Postuler -->
                                          <div class="d-flex justify-content-center mt-4">
                                              <button (click)="addpostule()" type="submit" class="btn btn-primary" style="width: 150px;" [disabled]="loading">
                                                  <div *ngIf="loading" class="spinner-border spinner-border-sm me-2" role="status">
                                                      <span class="sr-only">Loading...</span>
                                                  </div>
                                                  <span *ngIf="!loading">Postuler</span>
                                              </button>
                                          </div>
                                      </form>
                                  </div>
                              </div>
                          </div>
                      </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal pour les détails de l'offre -->
    <div class="modal fade" id="detailOffreModal" tabindex="-1" aria-labelledby="detailMissionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="detailMissionModalLabel">{{ missionsbyId.title }}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><strong>Description :</strong> {{ missionsbyId.description }}</p>
                    <p><strong>Date de début :</strong> {{ missionsbyId.dateDebut | date:'dd/MM/yyyy' }}</p>
                    <p><strong>Date de fin :</strong> {{ missionsbyId.dateFin | date:'dd/MM/yyyy' }}</p>
                    <p><strong>Statut :</strong> {{ missionsbyId.statut }}</p>
                    <p><strong>Type de contrat :</strong> {{ missionsbyId.typeContrat }}</p>
                    <p><strong>Lieu :</strong> {{ missionsbyId.typeLieu }}</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- /Cart -->
